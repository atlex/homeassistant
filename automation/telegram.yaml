- id: telegram_help
  alias: telegram_help
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/start"
  action:
    - service: notify.Telegram
      data_template:
        message: |
            /temp - all temperature
            /hum - all humidity
            /clima - all temperature and humidity
            /sys - system information
            /cams - record clips from all cameras

- id: telegram_temp_all_report
  alias: telegram_temp_all_report
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/temp"
  action:
    - service: notify.Telegram
      data_template:
        message: |
            Street {{ states('sensor.temperature_158d0001b91127') }}C
            Kids {{ states('sensor.temperature_158d00019f8776') }}C
            Bathroom {{ states('sensor.temperature_158d0001b8cd45') }}C, {{ states('sensor.temperature_158d00040e1461') }}C 
            Bedroom {{ states('sensor.temperature_158d00019d3869') }}C
            Kitchen {{ states('sensor.temperature_158d00019d37b4') }}C
            
- id: telegram_hum_all_report
  alias: telegram_hum_all_report
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/hum"
  action:
    - service: notify.Telegram
      data_template:
        message: |
            Street {{ states('sensor.humidity_158d0001b91127') }}%
            Kids {{ states('sensor.humidity_158d00019f8776') }}%
            Bathroom {{ states('sensor.humidity_158d0001b8cd45') }}%, {{ states('sensor.humidity_158d00040e1461') }}%
            Bedroom {{ states('sensor.humidity_158d00019d3869') }}%
            Kitchen {{ states('sensor.humidity_158d00019d37b4') }}%  

- id: telegram_clima_all_report
  alias: telegram_clima_all_report
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/clima"
  action:
    - service: notify.Telegram
      data_template:
        message: |
            Street {{ states('sensor.temperature_158d0001b91127') }}C / {{ states('sensor.humidity_158d0001b91127') }}%
            Kids {{ states('sensor.temperature_158d00019f8776') }}C / {{ states('sensor.humidity_158d00019f8776') }}%
            Bathroom {{ states('sensor.temperature_158d0001b8cd45') }}C, {{ states('sensor.temperature_158d00040e1461') }}C / {{ states('sensor.humidity_158d0001b8cd45') }}%, {{ states('sensor.humidity_158d00040e1461') }}% 
            Bedroom {{ states('sensor.temperature_158d00019d3869') }}C / {{ states('sensor.humidity_158d00019d3869') }}%
            Kitchen {{ states('sensor.temperature_158d00019d37b4') }}C / {{ states('sensor.humidity_158d00019d37b4') }}% 

- id: telegram_sys
  alias: telegram_sys
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/sys"
  action:
    - service: notify.Telegram
      data_template:
        message: |
            Last boot: {{ states('sensor.last_boot') }}
            Uptime: {{ states('sensor.uptime') }} {{ state_attr('sensor.uptime', 'unit_of_measurement') }}   
            Disk free: {{ states('sensor.disk_free') }} {{ state_attr('sensor.disk_free', 'unit_of_measurement') }}   
 
- id: telegram_cams
  alias: telegram_cams
  initial_state: true
  trigger: 
    - platform: event
      event_type: telegram_command
      event_data: 
        command: "/cams"
  action:
    - service: camera.record
      data:
        entity_id: camera.reostreet_profile001_substream
        filename: "/config/www/cam_captures/reoStreet.mp4"
        duration: 10
    - delay: 00:00:15
    - service: camera.record
      data:
        entity_id: camera.reokids_profile001_substream
        filename: "/config/www/cam_captures/reoKids.mp4"
        duration: 10
    - delay: 00:00:15
    - service: camera.record
      data:
        entity_id: camera.yi720hd
        filename: "/config/www/cam_captures/yi720hd.mp4"
        duration: 10
    - delay: 00:00:15
    - service: notify.Telegram
      data:
        title: Video
        message: "Видео"
        data:
          video:
            - file: "/config/www/cam_captures/reoStreet.mp4"
            - file: "/config/www/cam_captures/reoKids.mp4"
            - file: "/config/www/cam_captures/yi720hd.mp4"
            
