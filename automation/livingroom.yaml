# - id: front_door_sensor
#   alias: front_door_sensor
#   trigger:
#     platform: state
#     entity_id: binary_sensor.door_window_sensor_158d0001b7585e
#     from: "off"
#     to: "on"
#   action:
#     service: notify.Telegram
#     data_template:
#       message: "Front door is {{ states('binary_sensor.door_window_sensor_158d0001b7585e') }}."
      
- id: livingroom_hum_above
  alias: livingroom_hum_above
  trigger:
    platform: numeric_state
    entity_id: sensor.mi_h_3f59c880c04e
    above: 70
  action:
    service: notify.Telegram
    data_template:
      message: "Livingroom humidity is {{ states('sensor.mi_h_3f59c880c04e') }}%."

- id: livingroom_temp_below
  alias: livingroom_temp_below
  trigger:
    platform: numeric_state
    entity_id: sensor.mi_t_3f59c880c04e
    below: 21
  action:
    service: notify.Telegram
    data_template:
      message: "Livingroom temperature is {{ states('sensor.mi_t_3f59c880c04e') }}%."

- id: livingroom_tv_on
  alias: livingroom_tv_on
  trigger:
    platform: state
    entity_id: media_player.lg_tv
    from: 'off'
    to: 'on'
  action:
    service: notify.Telegram
    data_template:
      message: "LG TV is {{ states('media_player.lg_tv') }}."
      
- id: livingroom_tv_gateway_light_on
  alias: livingroom_tv_gateway_light_on
  trigger:
    - platform: state
      entity_id: media_player.lg_tv
      from: 'off'
      to: 'on'
    - platform: numeric_state
      entity_id: sensor.illumination_34ce008141db
      below: 40
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: media_player.lg_tv
        state: 'on'
      - condition: numeric_state
        entity_id: sensor.illumination_34ce008141db
        below: 40
  action:
    - service: light.turn_on
      entity_id: light.gateway_light_34ce008141db
      data:
        brightness: 20
        rgb_color: [255,51,51]
    - delay: 00:00:03
    - service: notify.Telegram
      data_template:
        message: "LG TV is {{ states('media_player.lg_tv') }}. Light is {{ states('sensor.illumination_34ce008141db') }}LM. Light is {{ states('light.gateway_light_34ce008141db') }}."

- id: livingroom_tv_off
  alias: livingroom_tv_off
  trigger:
    - platform: state
      entity_id: media_player.lg_tv
      from: 'on'
      to: 'off'
  action:
    - service: light.turn_off
      entity_id: light.gateway_light_34ce008141db
    - delay: 00:00:03
    - service: notify.Telegram
      data_template:
        message: "LG TV is {{ states('media_player.lg_tv') }}. Light is {{ states('sensor.illumination_34ce008141db') }}LM. Light is {{ states('light.gateway_light_34ce008141db') }}."

- id: street_lamp_on
  alias: street_lamp_on
  trigger:
    - platform: sun
      event: sunset
      #offset: "00:30:00"
  action: 
    - service: switch.turn_on
      entity_id: switch.tz3000_vtscrpmw_ts0121_on_off
    - delay: 00:00:03
    - service: notify.Telegram
      data_template:
        message: "Street Lamp is {{ states('switch.tz3000_vtscrpmw_ts0121_on_off') }}."
        
- id: street_lamp_off
  alias: street_lamp_off
  trigger:
    - platform: sun
      event: sunrise
      offset: "-01:00:00"
  action:
    - service: switch.turn_off
      entity_id: switch.tz3000_vtscrpmw_ts0121_on_off
    - delay: 00:00:03
    - service: notify.Telegram
      data_template:
        message: "Street Lamp is {{ states('switch.tz3000_vtscrpmw_ts0121_on_off') }}."

